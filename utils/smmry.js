
/* 

  A convenience proxy for smmry endpoint deployed at: https://smmry.fly.dev/  

  Takes text and summarizes using text rank



  https://smmry.fly.dev/?sentences=4&text=When%20AMD%20brought%20the%20first%20Ryzen%20processors%20to%20desktops%20in%202017,%20the%20chips%27%20secret%20weapon%20was%20cores.%20AMD%20couldn%E2%80%99t%20match%20Intel%E2%80%99s%20number%20of%20instructions-per-clock%20or%20hit%20the%20same%20clock%20speeds,%20but%20what%20it%20could%20do%20was%20sell%20you%20six%20or%20eight%20reasonably%20performant%20processor%20cores%20at%20the%20same%20price%20Intel%20charged%20for%20four.%20FURTHER%20READING%20Intel%E2%80%99s%2013th-gen%20%E2%80%9CRaptor%20Lake%E2%80%9D%20CPUs%20are%20official,%20launch%20October%2020%20The%2012-core%20and%2016-core%20options%20came%20a%20couple%20years%20later,%20bringing%20high-end%20workstation%20performance%20to%20much%20less%20expensive%20PCs%E2%80%94and%20forcing%20Intel%20to%20follow%20suit.%20That%20brought%20down%20costs.%20In%202014,%20an%208-core%20CPU%20cost%20$999%20on%20top%20of%20a%20pricey%20workstation%20motherboard;%20today,%20you%20can%20get%208-core%20chips%20for%20less%20than%20$300%20and%20pop%20them%20into%20an%20$80%20board%20if%20you%20want.%20Five%20years%20after%20Ryzen%20debuted,%20the%20shoe%20is%20on%20the%20other%20foot.%20AMD%20now%20has%20the%20technological%20lead,%20in%20terms%20of%20instructions-per-clock,%20CPU%20manufacturing,%20and%20power%20efficiency.%20But%20by%20throwing%20more%20cores%20at%20the%20problem%20and%20pricing%20its%20chips%20aggressively,%20Intel%20has%20put%20together%20a%20desktop%20lineup%20that%E2%80%99s%20easier%20to%20recommend%20than%20AMD%E2%80%99s,%20even%20though%20AMD%20just%20fielded%20its%20fastest%20desktop%20processor%20lineup%20ever.%20%E2%80%9CMore%20cores%E2%80%9D%20isn%E2%80%99t%20all%20there%20is%20to%20Intel%E2%80%99s%2013th-generation%20%22Raptor%20Lake%22%20CPUs,%20but%20it%E2%80%99s%20pretty%20dang%20close.%20Given%20the%20similarities%20to%20the%20previous%20chip%20generation%20and%20the%20increase%20in%20Intel%27s%20topline%20power%20consumption%20figures,%20I%20didn%27t%20come%20to%20these%20new%20CPUs%20expecting%20to%20be%20impressed.%20Color%20me%20wrong%E2%80%94Zen%204%20and%20Ryzen%207000%20are%20more%20interesting,%20but%20Intel%27s%2013th-gen%20chips%20are%20a%20lot%20easier%20to%20recommend.%20Table%20of%20Contents%20P-%20and%20E-cores%20(re-)explained%20New%20to%20Raptor%20Lake%20Our%20testbed%20Many,%20many%20cores%20make%20light%20work%20Power%20use:%20High%20by%20default%20Turning%20the%20tables%20on%20AMD%20The%20good%20The%20bad%20The%20ugly%20P-%20and%20E-cores%20(re-)explained%20When%20you%20hear%20%22efficiency%20core%22%20(E-core),%20you%20might%20think%20of%20a%20low-performance%20CPU%20core%20used%20to%20reduce%20power%20usage%20in%20laptops.%20That%27s%20not%20necessarily%20incorrect,%20but%20what%27s%20truly%20efficient%20about%20Intel%27s%20E-cores%20is%20the%20amount%20of%20space%20in%20a%20CPU%20die%20that%20they%20take%20up.%20In%20Intel%27s%20illustrations%20and%20in%20die%20shots%20of%20the%20Alder%20Lake%20and%20Raptor%20Lake%20chips,%20a%20cluster%20of%20four%20E-cores%20(and%20they%20always%20come%20in%20groups%20of%20four,%20since%20each%20group%20of%20four%20cores%20shares%20cache%20and%20other%20resources)%20takes%20up%20about%20the%20same%20amount%20of%20space%20as%20a%20single%20performance%20core%20(P-core).%20The%20P-cores%20and%20E-cores%20help%20with%20different%20kinds%20of%20workloads.%20P-cores%20handle%20games%20and%20other%20apps%20where%20one%20or%20just%20a%20handful%20of%20fast%20cores%20are%20needed,%20while%20the%20E-cores%20collectively%20make%20a%20big%20difference%20when%20chewing%20through%20tasks%20that%20can%20engage%20all%20of%20a%20CPU%27s%20cores%20at%20once.%20That%20approach%20has%20drawbacks%20as%20implemented.%20Only%20Windows%2011%20and%20newer%20Linux%20kernels%20support%20Intel%27s%20%22Thread%20Director,%22%20a%20software%20layer%20that%20helps%20decide%20which%20tasks%20are%20assigned%20to%20E-cores%20and%20which%20are%20assigned%20to%20P-cores;%20Windows%2010%20and%20older%20operating%20systems%20will%20run%20on%20these%20hybrid%20CPUs,%20but%20not%20always%20optimally.%20Other%20apps%20that%20request%20low-level%20hardware%20access%20(such%20as%20anti-cheat%20or%20DRM%20software,%20old%20games,%20restrictive%20test-taking%20software)%20can%20crash%20or%20fail%20to%20run%20on%20these%20hybrid%20CPUs,%20though%20many%20of%20these%20issues%20have%20been%20fixed%20since%20Alder%20Lake%27s%20release.%20And%20the%20new%20Intel%20CPUs%20don%27t%20support%20AVX-512%20instructions,%20something%20Intel%20had%20been%20pushing%20in%20its%20CPUs%20for%20years.%20AVX-512%20is%20present%20in%20the%20P-cores%20but%20permanently%20turned%20off%20because%20the%20E-cores%20don%27t%20support%20it.%20This%20means%20AMD%27s%20newest%20CPUs%20support%20instructions%20that%20Intel%27s%20don%27t,%20even%20though%20Intel%20originated%20them%20and%20pushed%20their%20adoption%20for%20years%20(they%20are,%20admittedly,%20only%20beneficial%20in%20a%20handful%20of%20relatively%20niche%20workloads).%20All%20things%20considered,%20though,%20for%20most%20workloads%20and%20most%20computers,%20the%20combination%20of%20P-%20and%20E-cores%20works,%20and%20the%20arrangement%20gives%20Intel%20a%20way%20to%20stay%20competitive%20with%20AMD%27s%20single-%20and%20multi-core%20performance%20without%20needing%20to%20cram%2012%20or%2016%20cores%20into%20a%20single%20giant%20piece%20of%20silicon.%20Unlike%20AMD,%20Intel%20isn%27t%20using%20chiplets%20in%20its%20consumer%20desktop%20CPUs.%20New%20to%20Raptor%20Lake%20This%20brings%20us%20to%20Raptor%20Lake.%20The%20E-cores%20are%20architecturally%20very%20similar%20to%20the%20ones%20included%20in%2012th-generation%20processors,%20but%20they%20are%20running%20at%20somewhat%20higher%20clock%20speeds,%20each%20cluster%20of%20cores%20gets%204MB%20of%20L3%20cache%20instead%20of%202MB,%20and%20(most%20importantly)%20there%20are%20a%20lot%20more%20of%20them.%20The%20Core%20i9-13900K%20goes%20from%208%20cores%20to%2016,%20while%20the%20i7-13700K%20and%20i5-13600K%20both%20go%20from%204%20to%208.%20To%20accommodate%20these%20extra%20cores,%20Intel%20boosted%20the%20power%20limits%20for%20all%20of%20these%20processors,%20upping%20the%20maximum%20Turbo%20Boost%20power%20limit%20(also%20called%20PL2)%20from%20241%20W%20to%20253%20W%20for%20the%20i9;%20from%20190%20W%20to%20253%20W%20for%20the%20i7;%20and%20from%20150%20W%20to%20181%20W%20for%20the%20i5.



*/


import { fetchPost } from "$plasmid/utils/fetch-helpers"
import { PUBLIC_SCRAPING_BEE } from '$env/static/public';

export const getSmmry = async (text, sentences = 2) => {
  // let res = await fetch(`https://smmry.fly.dev/?sentences=${sentences}&text=${text}`)
  let res = await fetchPost(`https://smmry.fly.dev/`, {
    // let res = await fetchPost(`http://localhost:3000/`, {
    sentences, text
  }, fetch)
  if (res.ok) {
    let json = await res.json()
    return json
  }
}
