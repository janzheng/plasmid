!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@tiptap/core"),require("@tiptap/pm/state")):"function"==typeof define&&define.amd?define(["exports","@tiptap/core","@tiptap/pm/state"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@tiptap-pro/extension-details-content"]={},t.core,t.state)}(this,(function(t,e,n){"use strict";const i=e.Node.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:t}){return["div",e.mergeAttributes(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addNodeView(){return({HTMLAttributes:t})=>{const n=document.createElement("div"),i=e.mergeAttributes(this.options.HTMLAttributes,t,{"data-type":this.name,hidden:"hidden"});return Object.entries(i).forEach((([t,e])=>n.setAttribute(t,e))),n.addEventListener("toggleDetailsContent",(()=>{n.toggleAttribute("hidden")})),{dom:n,contentDOM:n,ignoreMutation:t=>"selection"!==t.type&&(!n.contains(t.target)||n===t.target),update:t=>t.type===this.type}}},addKeyboardShortcuts(){return{Enter:({editor:t})=>{const{state:i,view:o}=t,{selection:r}=i,{$from:d,empty:s}=r,a=e.findParentNode((t=>t.type===this.type))(r);if(!s||!a||!a.node.childCount)return!1;const c=d.index(a.depth),{childCount:p}=a.node;if(!(p===c+1))return!1;const u=a.node.type.contentMatch.defaultType,l=null==u?void 0:u.createAndFill();if(!l)return!1;const f=i.doc.resolve(a.pos+1),h=p-1,b=a.node.child(h),y=f.posAtIndex(h,a.depth);if(!b.eq(l))return!1;const m=d.node(-3);if(!m)return!1;const A=d.indexAfter(-3),g=e.defaultBlockAt(m.contentMatchAt(A));if(!g||!m.canReplaceWith(A,A,g))return!1;const M=g.createAndFill();if(!M)return!1;const{tr:T}=i,v=d.after(-2);T.replaceWith(v,v,M);const L=T.doc.resolve(v),x=n.Selection.near(L,1);T.setSelection(x);const H=y,C=y+b.nodeSize;return T.delete(H,C),T.scrollIntoView(),o.dispatch(T),!0}}}});t.DetailsContent=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}));
